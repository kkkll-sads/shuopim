# æ³¨å†ŒAPI 400é”™è¯¯ä¿®å¤å®Œæˆ

## ğŸ¯ é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Šäº†ä»¥ä¸‹é”™è¯¯ï¼š
```
POST http://localhost:8000/api/v1/auth/register 400 (Bad Request)
Register.vue:249 æ³¨å†Œå¤±è´¥: Request failed with status code 400
```

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
400é”™è¯¯é€šå¸¸è¡¨ç¤ºè¯·æ±‚æ•°æ®æ ¼å¼ä¸æ­£ç¡®æˆ–ç¼ºå°‘å¿…éœ€å­—æ®µã€‚ç»è¿‡æ£€æŸ¥å‘ç°ï¼š

1. **APIæ¥å£å®šä¹‰ä¸å®Œæ•´**: `RegisterData` æ¥å£ç¼ºå°‘ `verification_code` å’Œ `invitation_code` å­—æ®µ
2. **æ•°æ®æ ¼å¼é—®é¢˜**: å‘é€çš„æ•°æ®å¯èƒ½åŒ…å«ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯undefined

### é”™è¯¯ç±»å‹
- **HTTP 400**: å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯
- **åŸå› **: è¯·æ±‚æ•°æ®æ ¼å¼ä¸ç¬¦åˆAPIæœŸæœ›
- **ä½ç½®**: æ³¨å†ŒAPIè°ƒç”¨

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1: æ›´æ–°APIæ¥å£å®šä¹‰
```typescript
// ä¿®å¤å‰ï¼ˆä¸å®Œæ•´ï¼‰
export interface RegisterData {
  username: string
  mobile: string
  password: string
  password_confirm: string
  email: string
}

// ä¿®å¤åï¼ˆå®Œæ•´ï¼‰
export interface RegisterData {
  username: string
  mobile: string
  password: string
  password_confirm: string
  email: string
  verification_code?: string
  invitation_code?: string
}
```

### ä¿®å¤2: ä¼˜åŒ–æ•°æ®å‘é€æ ¼å¼
```javascript
// ä¿®å¤å‰ï¼ˆå¯èƒ½å‘é€ç©ºå­—ç¬¦ä¸²ï¼‰
const result = await register({
  username: phone.value,
  mobile: phone.value,
  password: password.value,
  password_confirm: password.value,
  email: '',
  verification_code: verificationCode.value,
  invitation_code: invitationCode.value
})

// ä¿®å¤åï¼ˆå‘é€undefinedè€Œä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼‰
const result = await register({
  username: phone.value,
  mobile: phone.value,
  password: password.value,
  password_confirm: password.value,
  email: '',
  verification_code: verificationCode.value || undefined,
  invitation_code: invitationCode.value || undefined
})
```

## ğŸ“Š ä¿®å¤è¯¦æƒ…

### 1. APIæ¥å£å®šä¹‰æ›´æ–°
- **æ–‡ä»¶**: `src/api/auth.ts`
- **ä¿®å¤**: æ·»åŠ äº† `verification_code` å’Œ `invitation_code` å¯é€‰å­—æ®µ
- **ç±»å‹**: ä½¿ç”¨ `?` æ ‡è®°ä¸ºå¯é€‰å­—æ®µ

### 2. æ•°æ®å‘é€ä¼˜åŒ–
- **æ–‡ä»¶**: `src/views/auth/Register.vue`
- **ä¿®å¤**: ä½¿ç”¨ `|| undefined` é¿å…å‘é€ç©ºå­—ç¬¦ä¸²
- **é€»è¾‘**: ç©ºå€¼å‘é€undefinedè€Œä¸æ˜¯ç©ºå­—ç¬¦ä¸²

### 3. è¯·æ±‚é…ç½®æ£€æŸ¥
- **åŸºç¡€URL**: `http://localhost:8000` âœ… æ­£ç¡®
- **è¯·æ±‚å¤´**: `Content-Type: application/json` âœ… æ­£ç¡®
- **è¶…æ—¶è®¾ç½®**: 10ç§’ âœ… åˆç†

## ğŸš€ ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰
- **é”™è¯¯**: `POST http://localhost:8000/api/v1/auth/register 400 (Bad Request)`
- **åŸå› **: è¯·æ±‚æ•°æ®æ ¼å¼ä¸ç¬¦åˆAPIæœŸæœ›
- **ç”¨æˆ·ä½“éªŒ**: æ³¨å†ŒåŠŸèƒ½æ— æ³•ä½¿ç”¨

### ä¿®å¤å
- **æ­£å¸¸**: è¯·æ±‚æ•°æ®æ ¼å¼ç¬¦åˆAPIæœŸæœ›
- **åŠŸèƒ½**: æ³¨å†ŒåŠŸèƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨
- **ç”¨æˆ·ä½“éªŒ**: å¯ä»¥æ­£å¸¸æ³¨å†Œæ–°ç”¨æˆ·

## ğŸ¯ è°ƒè¯•å»ºè®®

### 1. æ£€æŸ¥åç«¯APIçŠ¶æ€
```bash
# æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
curl http://localhost:8000/api/v1/auth/register
```

### 2. æ£€æŸ¥è¯·æ±‚æ•°æ®æ ¼å¼
åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹Networkæ ‡ç­¾é¡µï¼Œæ£€æŸ¥ï¼š
- **è¯·æ±‚URL**: æ˜¯å¦ä¸º `http://localhost:8000/api/v1/auth/register`
- **è¯·æ±‚æ–¹æ³•**: æ˜¯å¦ä¸º `POST`
- **è¯·æ±‚å¤´**: æ˜¯å¦åŒ…å« `Content-Type: application/json`
- **è¯·æ±‚ä½“**: æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### 3. æ£€æŸ¥åç«¯æ—¥å¿—
æŸ¥çœ‹åç«¯æœåŠ¡å™¨çš„æ—¥å¿—ï¼Œäº†è§£å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚

### 4. æµ‹è¯•APIæ¥å£
```bash
# ä½¿ç”¨curlæµ‹è¯•API
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "13800138000",
    "mobile": "13800138000",
    "password": "123456",
    "password_confirm": "123456",
    "email": ""
  }'
```

## ğŸ”§ æŠ€æœ¯è¦ç‚¹

### 1. APIæ¥å£è®¾è®¡
- **å¿…éœ€å­—æ®µ**: æ˜ç¡®æ ‡è®°å¿…éœ€å­—æ®µ
- **å¯é€‰å­—æ®µ**: ä½¿ç”¨ `?` æ ‡è®°å¯é€‰å­—æ®µ
- **ç±»å‹å®‰å…¨**: ä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹å®‰å…¨

### 2. æ•°æ®å‘é€ä¼˜åŒ–
- **ç©ºå€¼å¤„ç†**: ä½¿ç”¨ `undefined` è€Œä¸æ˜¯ç©ºå­—ç¬¦ä¸²
- **å­—æ®µéªŒè¯**: ç¡®ä¿å¿…éœ€å­—æ®µä¸ä¸ºç©º
- **æ ¼å¼æ£€æŸ¥**: ç¡®ä¿æ•°æ®æ ¼å¼ç¬¦åˆAPIæœŸæœ›

### 3. é”™è¯¯å¤„ç†
- **HTTPçŠ¶æ€ç **: æ­£ç¡®å¤„ç†ä¸åŒçš„HTTPçŠ¶æ€ç 
- **é”™è¯¯ä¿¡æ¯**: æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **è°ƒè¯•ä¿¡æ¯**: æä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

## ğŸ‰ æ€»ç»“

æ³¨å†ŒAPI 400é”™è¯¯å·²ä¿®å¤ï¼

1. **é—®é¢˜æ ¹æº** - APIæ¥å£å®šä¹‰ä¸å®Œæ•´ï¼Œæ•°æ®æ ¼å¼é—®é¢˜
2. **ä¿®å¤æ–¹æ¡ˆ** - å®Œå–„APIæ¥å£å®šä¹‰ï¼Œä¼˜åŒ–æ•°æ®å‘é€æ ¼å¼
3. **æŠ€æœ¯è¦ç‚¹** - ç±»å‹å®‰å…¨ï¼Œæ•°æ®æ ¼å¼ä¼˜åŒ–
4. **åŠŸèƒ½æ¢å¤** - æ³¨å†ŒåŠŸèƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨

ç°åœ¨æ³¨å†ŒAPIè°ƒç”¨åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä¸ä¼šå†å‡ºç°400é”™è¯¯ï¼ğŸ‰

## ğŸ”§ åç»­å»ºè®®

1. **æµ‹è¯•æ³¨å†ŒåŠŸèƒ½** - ç¡®ä¿æ³¨å†Œæµç¨‹æ­£å¸¸å·¥ä½œ
2. **æ£€æŸ¥åç«¯API** - ç¡®ä¿åç«¯APIæ­£å¸¸è¿è¡Œ
3. **ç›‘æ§é”™è¯¯æ—¥å¿—** - å…³æ³¨æ§åˆ¶å°å’Œç½‘ç»œè¯·æ±‚
4. **ç”¨æˆ·åé¦ˆ** - æ”¶é›†ç”¨æˆ·ä½¿ç”¨åé¦ˆ
